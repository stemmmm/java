# 메모리 가시성

## 개념
- 멀티스레드 환경에서 한 스레드에서 변경한 값이 다른 스레드에서 즉시 보이지 않을 수 있는 문제
- 이는 각 스레드를 실행하는 CPU 코어가 캐시 메모리를 사용하기 때문에 발생함
- 즉, 특정 스레드에서 변경된 값이 메인 메모리에 반영되지 않고 캐시 메모리에만 반영되기 때문에 발생함
- 변경된 값이 언제 메인 메모리에 반영될지는 CPU 설계 방식과 실행 환경에 따라 다르지만, 컨텍스트 스위칭 발생 시 반영될 수 있음

## `volatile`
- `volatile` 키워드를 사용하여 항상 메인 메모리에 값을 읽고 쓰도록 강제함으로써 메모리 가시성 문제를 해결할 수 있음
- 하지만 `volatile` 키워드를 사용하게 되면 캐시 메모리를 사용하지 않아 성능 저하가 발생하므로, 꼭 필요한 경우에만 주의해서 사용해야함
- 또한, `volatile` 키워드만 사용한다해서 원자성이 보장되지는 않음